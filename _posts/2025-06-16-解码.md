# Raw Data原始数据
使用例如WireShark等流行的工具捕获数据包。

# 业务识别

## 包头解码

## IP分片关联
IP分片（IP Fragmentation）是指在网络传输中，当一个IP数据包的大小超过路径MTU（Maximum Transmission Unit）时，会被拆分成多个小包进行传输。   

IP分片关联是指在抓包或解码过程中，将属于同一个原始IP数据包的多个分片重新关联重组，以便正确解析完整的数据包内容，因为单个分片无法还原完整的协议结构（如TCP/UDP、应用层数据）。

## Capture packets抓包
分片重组后，使用抓包工具才能显示完整协议内容Application layer (Layer 7 in OSI model): HTTP, DNS, SIP...

## 解析上层的协议
继续解析上层（Layer 7）的协议被称为业务层解码。

## 深度识别
深度包检测（Deep Packet Inspection）是一种深度包检测技术，不仅解析协议头，还深入分析数据包载荷（payload）内容，从而识别具体的业务、应用、内容甚至用户行为。

## 镜像功能

## 业务大小类的热更新（Hot Update）

# 对话单字段的感知（QoE ）分析
QoE（Quality of Experience） 是指用户在使用网络业务时的主观体验质量，是网络服务质量（QoS）的“用户感知”版本。

> QoE Metrics（QoE指标） 是通过技术手段提取并量化用户使用网络业务时的体验质量的指标集合。

|                 | QoS Metrics（网络质量指标）           | QoE Metrics（用户体验指标）              |
|-----------------------|----------------------------------------|-------------------------------------------|
| **定义**              | 网络层面的性能指标                     | 用户感知层面的体验质量                     |
| **示例**              | 带宽、时延、丢包率                     | 视频卡顿率、网页加载时间、游戏PING延迟     |
| **测量方式**          | 网络设备、探针、协议层                 | 协议解析、状态机、AI建模                   |
| **关注点**            | 网络是否正常                           | 用户是否满意                               |
| **应用场景**          | 网络优化、故障定位                     | 用户体验优化、投诉分析、出单机制           |

常见的 QoE Metrics（用户体验指标）如下表格。

| 指标                            | 描述                                           | 适用业务                             |
|---------------------------------|------------------------------------------------|--------------------------------------|
| 视频首屏时间（Video Start Delay） | 用户点击播放 → 第一帧画面显示的时间             | 视频类（抖音、B站、YouTube）         |
| 视频卡顿率（Buffering Ratio）     | 卡顿时长 / 总播放时长                           | 视频类                               |
| HTTP加载时间（Page Load Time）    | 页面从请求开始 → 加载完成的时间                 | Web浏览                              |
| DNS解析延迟（DNS RTT）            | 域名解析请求 → 响应的时间                       | 所有HTTP业务                         |
| TCP建连时延（TCP RTT）            | TCP三次握手完成的时间                           | 所有TCP业务                          |
| HTTP失败率（HTTP Error Rate）     | HTTP请求失败次数 / 总请求数                     | Web类业务                            |
| 游戏PING延迟（Game Ping Delay）   | 游戏客户端发送请求 → 服务器响应的时间           | 手游、端游                           |
| VoIP MOS评分（Mean Opinion Score）| 语音质量评分（1~5分）                           | 微信语音、VoIP通话                   |
| 网页加载失败率                   | 页面加载失败次数 / 总加载次数                   | 浏览器访问类                         |

<!--
# 用户面协议机
业务合成处理入口
![alt text](assests/image.png)

| 步骤                 | 处理内容                                                                 | 说明                                       |
|----------------------|--------------------------------------------------------------------------|--------------------------------------------|
| 1. 接收协议解析字段   | 从协议解析层接收 IMSI、IP、Host、URL、DNS Query、TCP RTT 等字段         | 结构化字段流                               |
| 2. 业务识别           | 根据 Host、URL、User-Agent、协议特征等识别业务类型（视频、游戏、Web等） | 可基于规则或AI模型                         |
| 3. 会话/事务合成      | 将多个TCP包/UDP包/GTP包合成一次完整的业务事务（如一次HTTP请求、一次DNS查询） | 状态机、Session管理                        |
| 4. 状态机跟踪         | 跟踪业务状态（如视频播放中、卡顿、结束）                                 | 用于QoE指标提取                            |
| 5. QoE指标计算        | 根据状态机事件计算QoE指标（如卡顿率、首屏时间等）                        | 实时感知                                   |
| 6. 话单生成           | 合成完整的业务话单（CDR），输出结构化数据（JSON、CSV、Protobuf）         | 用于上报或存储                             |

-->
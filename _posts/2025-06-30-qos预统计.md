预报警告相关的。cursor助手协作py相关的。

## QoS和QoE预告报警系统

### 1. QoS统计告警系统

**主要功能**:
- 实时QoS统计告警业务库接口
- 支持KPI指标统计和告警
- 提供4级告警级别（严重、主要、次要、提示）
- 支持网元聚合和门限配置

### 2. QoS预统计系统

**主要功能**:
- 实时QoS预统计业务库接口
- 统一结构体数据处理
- 详单数据提取和处理

### 3. 实时指标统计告警系统

**主要功能**:
- 基本指标统计和KPI指标统计
- 告警数据处理和消警处理
- 支持多层次网元聚合

### 4. QoE指标监控系统

**主要功能**:
- 支持多种QoE业务类型（视频、游戏、会议、VoIP等）
- 提供详细的QoE指标ID和类型定义
- 包括卡顿、延迟、分辨率、码率等关键指标

### 5. XDPI告警机制

**主要功能**:
- XDPI容量告警和恢复
- 规则集加载失败告警
- 运行时错误告警
- 支持告警状态管理（产生、恢复、通知）

### 6. QoE数据处理

**主要功能**:
- QoE指标初始化和映射
- 支持多种视频平台（优酷、爱奇艺、腾讯等）
- 游戏和会议QoE指标处理

### 7. 视频QoE监控

**主要功能**:
- 视频播放状态监控
- 卡顿检测和统计
- 码率变化监控
- 初缓时间统计

### 8. KPI统计服务

**主要功能**:
- 视频业务KPI统计
- 下载速率、卡顿率等指标计算
- 支持多种视频平台统计

## QoS预统计和与QoS统计告警的关系

QosPreStat是QoS统计告警系统的**前置处理模块**：

1. **QosPreStat**: 负责数据预处理和格式转换
2. **QosStatAlarm**: 负责统计计算和告警判断

**数据流向**:
```
原始XDR → QosPreStat(预处理) → 标准结构体 → QosStatAlarm(统计告警)
```

这个预统计系统是整个QoS监控体系的基础，为后续的统计分析和告警提供了标准化的数据源。


## QoS预统计核心功能

### 1. **统一数据结构处理**
```cpp
typedef struct
{ 
    int     iTime;                            // 时间
    int     iProtocoltype;                    // 协议类型
    int     iEventtype;                       // 事件类型
    int     iCause;                           // 释放原因(差错码)
    WORD    wFailed;                          // 成功还是失败
    UINT    iCount;                           // 次数
    UINT64  iResponseTime;                    // 响应时间
    UINT64  iDurationTime;                    // 持续时长
}T_STANDARD_TDR;
```

**作用**: 将不同协议的XDR数据转换为统一的标准格式，便于后续统计处理。

### 2. **XDR到标准结构转换**

**作用**: 将原始XDR数据包转换为统一的标准结构体，支持一个XDR包转换为多个标准结构体。

### 3. **详单数据提取**

**作用**: 根据规则提取需要保存的详单数据，支持条件过滤。

### 4. **规则维度管理**
```cpp
typedef struct  
{
    int     iEventtype;                       // 事件类型
    int     iProtocoltype;                    // 协议类型
    char    szNetUnitKey[NETUNIT_KEY_LEN];    // 网元Key值    
}T_RuleKey;
```

**作用**: 定义统计规则的维度，包括事件类型、协议类型、网元等。